{{/* boolean feature tags */}}
{{- $work := false -}}{{/* true if this machine is a work machine */}}
{{- $personal := false -}}{{/* true if this machine should have personal secrets */}}
{{- $desktop := false -}}
{{- $laptop := false -}}
{{- $linux := false -}}
{{- $windows := false -}}
{{- $wsl := false -}}
{{- $android := false -}}

{{- $hostname := .chezmoi.hostname                    -}}
{{- $username := .chezmoi.username                    -}}
{{- if ($hostname | lower | contains "vancanh-ng")    -}}
{{-   $work = true                                    -}}
{{-   $laptop = true                                  -}}
{{- else if eq $username "u0_a505"                    -}}
{{-   $personal = true                                -}}
{{- else if ($hostname | lower | contains "bunnies")  -}}
{{-   $personal = true                                -}}
{{-   if ($hostname | lower | contains "desktop")     -}}
{{-     $desktop = true                               -}}
{{-   else if ($hostname | lower | contains "laptop") -}}
{{-     $laptop = true                                -}}
{{-   end                                             -}}
{{- end                                               -}}

{{- $email := "nv.canh@outlook.com" -}}
{{- if $work -}}
{{-   $email = "vancanh.ng@samsung.com" -}}
{{- end -}}

{{- $wallpaper := joinPath .chezmoi.homeDir "Pictures/Wallpapers/MiyabiZenlessZoneZero.gif" -}}
{{- if $work -}}
{{-   $wallpaper = joinPath .chezmoi.homeDir "Pictures/Wallpapers/2B.gif" -}}
{{- end -}}

{{- $wallpaperAlt := joinPath .chezmoi.homeDir "Pictures/Wallpapers/GothGirl.gif" -}}
{{- if $work -}}
{{-   $wallpaperAlt = joinPath .chezmoi.homeDir "Pictures/Wallpapers/UkinamiZenlessZoneZero.gif" -}}
{{- end -}}

{{/* windows only, 1 of pwsh, powershell, cmd */}}
{{- $shell := "cmd" -}}
{{- if lookPath "pwsh" -}}
{{-   $shell = "pwsh" -}}
{{- else if lookPath "powershell"}}
{{-   $shell = "powershell" -}}
{{- end -}}

{{- if eq .chezmoi.os "linux" -}}
{{-   $linux = true -}}
{{- end -}}

{{- if eq .chezmoi.os "android" -}}
{{-   $android = true -}}
{{- end -}}

{{- if eq .chezmoi.os "windows" -}}
{{-   $windows = true -}}
{{- end -}}

{{- if and (eq .chezmoi.os "linux") (.chezmoi.kernel.osrelease | lower | contains "microsoft") -}}
{{-   $wsl = true -}}
{{- end -}}

format: "yaml"
progress: true

edit:
  apply: true
  watch: true

git:
  autoCommit: false
  autoPush: false

diff:
{{- if lookPath "delta" }}
  pager: "delta"
{{- else if lookPath "cat"}}
  pager: "cat"
{{- end }}
  reverse: false
  exclude: ["externals"]

merge:
  command: "nvim"
  args:
    - "-d"
    - "{{ "{{" }} .Destination {{ "}}" }}"
    - "{{ "{{" }} .Source {{ "}}" }}"
    - "{{ "{{" }} .Target {{ "}}" }}"

pass:
{{- if lookPath "pass" }}
  command: "pass"
{{- else if lookPath "gopass"}}
  command: "gopass"
{{- end }}

data:
  wsl: {{ $wsl }}
  linux: {{ $linux }}
  windows: {{ $windows }}
  android: {{ $android }}
  work: {{ $work }}
  personal: {{ $personal }}
  desktop: {{ $desktop }}
  laptop: {{ $laptop }}
  email: {{ $email | quote }}
  defaultShell: {{ $shell | quote }}
  scale: {{ if $work -}} 2 {{- else -}} 1.25 {{- end}}
  screenWidth: {{ if $work -}} 2880 {{- else -}} 1920 {{- end}}
  screenHeight: {{ if $work -}} 1800 {{- else -}} 1080 {{- end}}
  fontSize: 13
  barHeight: 40
  p4port: {{ if $work -}} "107.113.53.156:1716" {{- else -}} "" {{- end}}
  p4user: {{ if $work -}} "vancanh.ng" {{- else -}} "" {{- end}}
  terminalBackground: true
  wallpaper: {{ $wallpaper | quote }}
  wallpaperAlt: {{ $wallpaperAlt | quote }}

{{- if $windows }}

cd:
  command: {{ $shell | quote }}
  args: "-nol"

interpreters:
  ps1:
    command: {{ $shell | quote }}
    args:
      - "-nop"
      - "-nol"

{{- end }}

encryption: "age"

age:
  identity : "~/.config/chezmoi/key.txt"
  recipient : "age1dd2wp2yuypkr6qgq9xd7keygec3rqpkap3c0yypegkvrg36q99nsa2vmdm"
