# ==============================================
# PSREADLINE SETTINGS
# ==============================================

{{ template "pwsh/PSReadLineProfile.ps1" . }}

# ==============================================
# ALIASES
# ==============================================

# stolen from https://github.com/giggio/posh-alias/blob/master/Posh-Alias.psm1
function Add-Alias($name, $alias) {
    $func = @"
function global:$name {
  `$expr = ('$alias ' + (( `$args | % { if (`$_.GetType().FullName -eq "System.String") { "``"`$(`$_.Replace('``"','````"').Replace("'","``'"))``"" } else { `$_ } } ) -join ' '))
  write-debug "Expression: `$expr"
  Invoke-Expression `$expr
}
"@
    Remove-Alias -ErrorAction SilentlyContinue $name
    write-debug "Defined function:`n$func"
    $func | Invoke-Expression
}

{{ template "pwsh/Aliases.ps1.tmpl" . }}

# ==============================================
# FUNCTIONS
# ==============================================

{{ template "pwsh/functions.ps1" . }}

# ==============================================
# EXTERNAL INIT
# ==============================================

{{ template "pwsh/externals.ps1.tmpl" . }}
