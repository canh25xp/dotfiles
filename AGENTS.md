# Agents Guide

- **Repository focus**: Dotfiles and machine bootstrap managed with [chezmoi](https://www.chezmoi.io/). Expect cross-platform targets (Windows, Linux, WSL, Termux/Android) and templating that adapts per host.
- **Key conventions**: Files prefixed with `dot_` map to real paths (e.g. `dot_bashrc.tmpl` becomes `~/.bashrc`). `private_` paths hold encrypted secrets; keep them in `*.age` form. `.tmpl` files are Go text templates, often using helpers populated from `.chezmoidata.yaml` and the data map defined in `.chezmoi.yaml.tmpl`.
- **Configuration switches**: `.chezmoi.yaml.tmpl` sets booleans like `work`, `personal`, `linux`, `windows`, `android`. Reuse these flags when adding conditional content instead of introducing new environment checks. Keep new template logic compact and comment sparingly so it stays readable.
- **Shared data**: `.chezmoidata.yaml` stores personal metadata (emails, hostnames, IPs, proxy info). Update this file if a template needs new values, and avoid leaking its contents into plaintext files outside the repo.
- **External resources**: `.chezmoiexternal.yaml.tmpl` pulls in git repos and remote assets (fonts, themes, password store). Extend this file when new assets are required, keeping platform guards consistent with the existing style.
- **Scripts**: `scripts/` contains bootstrap utilities for editors, language servers, and environment setup. Maintain POSIX shell compatibility for `*.sh` helpers, respect `set -euo pipefail`, and prefer mirroring existing argument and logging patterns. `scripts/sync.sh` mirrors Neovim configs between `dot_config/nvim` and `AppData/Local/nvim`; run it after touching either copy to keep parity.
- **Testing changes**: Use `chezmoi diff` (or `chezmoi apply --dry-run`) to confirm template output. For script edits, run them with the default shell when feasible; adding or updating scripts should include a note explaining how to validate on each platform.
- **Documentation**: Update `README.md`, `Keybindings.md`, or `TODO.md` when workflows or keybindings change. Screenshots live under `Pictures/`; avoid adding large binary assets unless necessary.
- **Security**: Never commit raw secrets or tokens. New sensitive files must be encrypted with `chezmoi age`. Respect the user's corporate/work separation when adding configurationsâ€”gate work-specific settings behind the `work` flag.
- **Coordination tips**: When adding major tooling, confirm whether a portable mode or reduced dependency path is required (see `TODO.md`). Mention any assumptions about package availability or network access in PR notes so future updates stay reproducible.
